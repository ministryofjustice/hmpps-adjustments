{% extends "../../../partials/layout.njk" %}
{% from "../../../macros/adaTable.njk" import adaTable %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% set pageTitle = applicationName + " - Review and approve ADAs" %}
{% set mainClasses = "app-container govuk-body" %}

{% block content %}

  {% if adasToReview.intercept.anyProspective %}
    {% set url = "/" + prisoner.prisonerNumber + "/additional-days/review-prospective" %}
  {% else %}
    {% set url = "/" + prisoner.prisonerNumber + "/additional-days/intercept" %}
  {% endif %}
  <a href="{{url}}" class="govuk-back-link">Back</a>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      <div class="govuk-form-group govuk-body">
        <h1 class="govuk-heading-l">
          <span class="govuk-caption-xl">Adjust release dates</span>
              Review and approve ADAs
            </h1>

        <p>
          {% if adasToReview.intercept.type == 'FIRST_TIME'%}
                ADA adjustments are based on adjudication records. To apply ADAs, you must confirm that the adjustment information below is correct.
               {% else %}
               Check that the existing ADAs are correct, then review and approve pending ADAs.
               {% endif %}
        </p>

        {% if adasToReview.intercept.type != 'FIRST_TIME'%}
          <h2 class="govuk-heading-m">Awarded ADAs</h2>
          {{ adaTable({
            tableId: 'awarded-adas',
            adas: adasToReview.awarded,
            total: adasToReview.totalAwarded,
            mainTitle: 'Awarded ADAs will be included in the calculation.',
            emptyTitle: prisoner | firstNameSpaceLastName + ' has no ADAs that are applicable to the current sentences.'
            })
             }}
        {% endif %}

        {% if adasToReview.suspended | length %}
          <h2 class="govuk-heading-m">Suspended ADAs</h2>
          {{ adaTable({
            tableId: 'suspended-adas',
            adas: adasToReview.suspended,
            total: adasToReview.totalSuspended,
            mainTitle: 'Suspended ADAs will not be included in the calculation.'
            }) }}
        {% endif %}

        <h2 class="govuk-heading-m">Awarded ADAs pending approval</h2>
        {{ adaTable({
          tableId: 'awaiting-approval-adas',
          adas: adasToReview.awaitingApproval,
          total: adasToReview.totalAwaitingApproval,
          mainTitle: 'Once you have reviewed and approved the ADAs pending approval, they will be added to the sentence calculation.',
          emptyTitle: 'No ADA records waiting for approval exist for this offender'
          }) }}

        {% if adasToReview.quashed | length %}
          <h2 class="govuk-heading-m">Review and approve quashed ADAs</h2>
          {{ adaTable({
            tableId: 'quashed-approval-adas',
            adas: adasToReview.quashed,
            total: adasToReview.totalQuashed,
            mainTitle: 'Once you have reviewed and approved the quashed ADAs, they will not be included in the sentence calculation'
            }) }}
        {% endif %}

      </div>

      <div class="govuk-inset-text">
            If you think some information is wrong, ask the team responsible for adjudications in your prison to correct it, then <a href="">reload this page.</a>
      </div>
      <div class="govuk-!-margin-top-8">
        <h2 class="govuk-heading-m">Approve ADAs</h2>
        <p class="govuk-body">If all the ADA information is correct, approve the pending ADAs.</p>
        <form class="form" method="post">
          <input type="hidden" name="_csrf" value="{{ csrfToken }}"/>
          {{ govukButton({
                text: "Approve",
                type: submit,
                preventDoubleClick: true,
                attributes: {'data-qa': 'approve-button'}
              }) }}
        </form>
      </div>
      <a href="../">Cancel and return to dashboard</a>
    </div>
  </div>
{% endblock %}